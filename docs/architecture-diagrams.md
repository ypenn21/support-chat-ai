# Architecture Diagrams

## Dual Mode Operation Overview

The Support Chat AI Assistant operates in two distinct modes:

**Suggestion Mode (Human-in-the-Loop):** AI provides suggestions that agents review and send manually.

**YOLO Mode (Autonomous Agent):** AI automatically responds to customers based on configurable goals, with human oversight and emergency controls.

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Support Agent's Browser                        â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Support Chat Website                          â”‚   â”‚
â”‚  â”‚              (Robinhood, Coinbase, Zendesk, etc.)               â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚  â”‚   Customer   â”‚  â”‚   Agent      â”‚  â”‚   Chat       â”‚          â”‚   â”‚
â”‚  â”‚  â”‚   Messages   â”‚  â”‚   Input      â”‚  â”‚   History    â”‚          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â”‚         â–²                                                        â”‚   â”‚
â”‚  â”‚         â”‚                                                        â”‚   â”‚
â”‚  â”‚         â”‚ DOM Monitoring                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         â”‚         Chrome Extension (Manifest V3)               â”‚   â”‚
â”‚  â”‚         â”‚                                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚           Content Script (Injected)                    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ DOM Observer (MutationObserver)              â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Message Detector (Find new customer msgs)    â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Context Extractor (Last N messages)          â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ UI Injector (Display suggestion panel)       â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚   â”‚
â”‚  â”‚                   â”‚              â”‚                         â”‚     â”‚   â”‚
â”‚  â”‚                   â”‚ Messages     â”‚ Response                â”‚     â”‚   â”‚
â”‚  â”‚                   â”‚              â”‚                         â”‚     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚        Background Service Worker                     â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Message Router (content â†” popup)             â”‚ â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ API Client (HTTP requests)                   â”‚ â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Auth Manager (API keys)                      â”‚ â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Cache Manager (Recent suggestions)           â”‚ â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Settings Manager (User preferences)          â”‚ â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚   â”‚
â”‚  â”‚                   â”‚              â”‚                         â”‚     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚               Popup UI (React)                       â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Settings Panel                                    â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ History Viewer                                    â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Status Indicator                                  â”‚  â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚                 â”‚
                            â”‚ HTTPS           â”‚ JSON Response
                            â”‚ POST            â”‚
                            â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Google Cloud Platform                             â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           Cloud Function (Node.js 20)                        â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  POST /api/suggest-response                            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  1. Validate request & authenticate                    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  2. Extract conversation context                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  3. Build prompt for Gemini                            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  4. Call Vertex AI                                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  5. Process response                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  6. Return formatted suggestions                       â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚                 â”‚                     â”‚
â”‚                           â”‚ API Call        â”‚ Generated Text      â”‚
â”‚                           â”‚                 â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Vertex AI (Gemini 1.5 Pro/Flash)               â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  â€¢ Generative AI Model                                      â”‚ â”‚
â”‚  â”‚  â€¢ Context understanding                                    â”‚ â”‚
â”‚  â”‚  â€¢ Response generation                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         Supporting Services                                  â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  â€¢ Secret Manager (API keys)                                â”‚ â”‚
â”‚  â”‚  â€¢ Firestore (Analytics/feedback)                           â”‚ â”‚
â”‚  â”‚  â€¢ Cloud Logging (Logs)                                     â”‚ â”‚
â”‚  â”‚  â€¢ Cloud Monitoring (Metrics)                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Sequence Diagram: Suggestion Mode

```
Agent Opens Chat          Content Script         Service Worker         Cloud Run API         Vertex AI
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚  1. Load chat page       â”‚                       â”‚                      â”‚                    â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  2. Initialize        â”‚                      â”‚                    â”‚
      â”‚                          â”‚  observers            â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
Customer sends message           â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  3. Detect new        â”‚                      â”‚                    â”‚
      â”‚                          â”‚  message (DOM)        â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  4. Extract context   â”‚                      â”‚                    â”‚
      â”‚                          â”‚  (last N messages)    â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  5. Send context      â”‚                      â”‚                    â”‚
      â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                      â”‚                    â”‚
      â”‚                          â”‚   chrome.runtime      â”‚                      â”‚                    â”‚
      â”‚                          â”‚   .sendMessage()      â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚  6. POST to API      â”‚                    â”‚
      â”‚                          â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
      â”‚                          â”‚                       â”‚  (HTTPS request)     â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚  7. Build prompt   â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚  8. Call Gemini    â”‚
      â”‚                          â”‚                       â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚  9. Generate text  â”‚
      â”‚                          â”‚                       â”‚                      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚  10. Format response â”‚                    â”‚
      â”‚                          â”‚                       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
      â”‚                          â”‚                       â”‚  (JSON)              â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  11. Return suggestionâ”‚                      â”‚                    â”‚
      â”‚                          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚                    â”‚
      â”‚                          â”‚   sendResponse()      â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  12. Inject UI panel  â”‚                      â”‚                    â”‚
      â”‚                          â”‚  with suggestion      â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚  13. Display suggestion  â”‚                       â”‚                      â”‚                    â”‚
      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
Agent reviews/edits              â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚  14. Copy to input       â”‚                       â”‚                      â”‚                    â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚  15. Send to customer    â”‚                       â”‚                      â”‚                    â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                       â”‚                      â”‚                    â”‚
```

## Data Flow Sequence Diagram: YOLO Mode

```
Agent Enables YOLO        Content Script         Service Worker         Cloud Run API         Vertex AI
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚  1. Configure goal       â”‚                       â”‚                      â”‚                    â”‚
      â”‚  "Resolve shipping"      â”‚                       â”‚                      â”‚                    â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  2. Activate          â”‚                      â”‚                    â”‚
      â”‚                          â”‚  autonomous mode      â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
Customer sends message           â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  3. Detect message    â”‚                      â”‚                    â”‚
      â”‚                          â”‚  + Extract context    â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  4. Send context      â”‚                      â”‚                    â”‚
      â”‚                          â”‚  + goal state         â”‚                      â”‚                    â”‚
      â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚  5. POST /autonomous â”‚                    â”‚
      â”‚                          â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
      â”‚                          â”‚                       â”‚  {goal, context,     â”‚                    â”‚
      â”‚                          â”‚                       â”‚   safety_rules}      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚  6. Goal analysis  â”‚
      â”‚                          â”‚                       â”‚                      â”‚  Check safety      â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚  7. Build goal-    â”‚
      â”‚                          â”‚                       â”‚                      â”‚  oriented prompt   â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚  8. Call Gemini    â”‚
      â”‚                          â”‚                       â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚  9. Decide action: â”‚
      â”‚                          â”‚                       â”‚                      â”‚  Respond/Escalate/ â”‚
      â”‚                          â”‚                       â”‚                      â”‚  Need-info/Done    â”‚
      â”‚                          â”‚                       â”‚                      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚  10. Return action   â”‚                    â”‚
      â”‚                          â”‚                       â”‚  + response + state  â”‚                    â”‚
      â”‚                          â”‚                       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  11. Receive response â”‚                      â”‚                    â”‚
      â”‚                          â”‚  + new goal state     â”‚                      â”‚                    â”‚
      â”‚                          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  12. Check safety     â”‚                      â”‚                    â”‚
      â”‚                          â”‚  (escalation check)   â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  13. Inject response  â”‚                      â”‚                    â”‚
      â”‚                          â”‚  into chat input      â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚  14. Preview (optional)  â”‚                       â”‚                      â”‚                    â”‚
      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚  (3 second delay)        â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  15. Click send       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  button (automated)   â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
Response sent to customer        â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚  16. Update popup     â”‚                      â”‚                    â”‚
      â”‚                          â”‚  (turns: 3, goal:     â”‚                      â”‚                    â”‚
      â”‚                          â”‚   "gathering info")   â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚  17. Monitor in popup    â”‚                       â”‚                      â”‚                    â”‚
      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
[Repeat for each customer message until goal complete or escalation]
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚  18. Goal achieved OR    â”‚                       â”‚                      â”‚                    â”‚
      â”‚  Escalation triggered    â”‚                       â”‚                      â”‚                    â”‚
      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚                    â”‚
      â”‚                          â”‚                       â”‚                      â”‚                    â”‚
      â”‚  19. Notification +      â”‚                       â”‚                      â”‚                    â”‚
      â”‚  conversation log        â”‚                       â”‚                      â”‚                    â”‚
      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                      â”‚                    â”‚
```

## Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Chrome Extension Layers                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 1: DOM Integration (Content Script Context)             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ DOM Observer â”‚  â”‚   Context    â”‚  â”‚ UI Injector  â”‚         â”‚
â”‚  â”‚              â”‚  â”‚  Extractor   â”‚  â”‚              â”‚         â”‚
â”‚  â”‚ Monitors     â”‚â”€â–ºâ”‚ Parses chat  â”‚  â”‚ Creates      â”‚         â”‚
â”‚  â”‚ mutations    â”‚  â”‚ messages     â”‚  â”‚ suggestion   â”‚         â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚ panel        â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                  â”‚                  â–²                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 2: Extension Core (Service Worker Context)              â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Message    â”‚  â”‚  API Client  â”‚  â”‚    Cache     â”‚         â”‚
â”‚  â”‚   Router     â”‚  â”‚              â”‚  â”‚   Manager    â”‚         â”‚
â”‚  â”‚              â”‚  â”‚ HTTP fetch   â”‚  â”‚              â”‚         â”‚
â”‚  â”‚ Routes msgs  â”‚â”€â–ºâ”‚ to Cloud     â”‚  â”‚ Stores       â”‚         â”‚
â”‚  â”‚ between      â”‚  â”‚ Function     â”‚  â”‚ recent       â”‚         â”‚
â”‚  â”‚ components   â”‚  â”‚              â”‚  â”‚ suggestions  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â–²                  â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚
          â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 3: UI Components (Browser Action Context)               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Settings   â”‚  â”‚   History    â”‚  â”‚    Status    â”‚         â”‚
â”‚  â”‚     Panel    â”‚  â”‚    Viewer    â”‚  â”‚  Indicator   â”‚         â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚         â”‚
â”‚  â”‚ Configure    â”‚  â”‚ Show past    â”‚  â”‚ Connection   â”‚         â”‚
â”‚  â”‚ preferences  â”‚  â”‚ suggestions  â”‚  â”‚ health       â”‚         â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Platform Detection Flow

```
Content Script Loads
        â”‚
        â–¼
    Check URL
        â”‚
        â”œâ”€â”€â–º zendesk.com â”€â”€â–º Load Zendesk Adapter
        â”‚                          â”‚
        â”‚                          â”œâ”€â–º Chat container: .chat-wrapper
        â”‚                          â”œâ”€â–º Messages: .chat-msg-text
        â”‚                          â””â”€â–º Input: .chat-input
        â”‚
        â”œâ”€â”€â–º intercom.io â”€â”€â–º Load Intercom Adapter
        â”‚                          â”‚
        â”‚                          â”œâ”€â–º Chat container: .intercom-messenger
        â”‚                          â”œâ”€â–º Messages: .intercom-message
        â”‚                          â””â”€â–º Input: .intercom-composer-input
        â”‚
        â””â”€â”€â–º Other â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Load Generic Adapter
                                   â”‚
                                   â”œâ”€â–º Try common selectors
                                   â”œâ”€â–º Message detection heuristics
                                   â””â”€â–º Fallback to user configuration
```

## State Management Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application State                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Chrome Storage (Persistent)                        â”‚   â”‚
â”‚  â”‚  â€¢ API keys                                         â”‚   â”‚
â”‚  â”‚  â€¢ User preferences                                 â”‚   â”‚
â”‚  â”‚  â€¢ Platform configurations                          â”‚   â”‚
â”‚  â”‚  â€¢ Suggestion history                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â–²                                   â”‚
â”‚                         â”‚ Sync                              â”‚
â”‚                         â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Zustand Store (Runtime)                            â”‚   â”‚
â”‚  â”‚  â€¢ Current suggestion                               â”‚   â”‚
â”‚  â”‚  â€¢ Loading states                                   â”‚   â”‚
â”‚  â”‚  â€¢ Error messages                                   â”‚   â”‚
â”‚  â”‚  â€¢ UI state (panel visible, etc.)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â–²                                   â”‚
â”‚                         â”‚ Subscribe                         â”‚
â”‚                         â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  React Components                                   â”‚   â”‚
â”‚  â”‚  â€¢ Popup UI                                         â”‚   â”‚
â”‚  â”‚  â€¢ Options page                                     â”‚   â”‚
â”‚  â”‚  â€¢ Injected suggestion panel                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Error Handling Flow

```
Error Occurs
    â”‚
    â–¼
Categorize Error
    â”‚
    â”œâ”€â”€â–º Network Error â”€â”€â”€â”€â–º Retry with exponential backoff
    â”‚                               â”‚
    â”‚                               â”œâ”€â”€â–º Success â”€â”€â–º Continue
    â”‚                               â”‚
    â”‚                               â””â”€â”€â–º Max retries â”€â”€â–º Show error to user
    â”‚
    â”œâ”€â”€â–º API Error (4xx) â”€â”€â–º Log error
    â”‚                               â”‚
    â”‚                               â””â”€â”€â–º Show user-friendly message
    â”‚
    â”œâ”€â”€â–º API Error (5xx) â”€â”€â–º Log error + Report to monitoring
    â”‚                               â”‚
    â”‚                               â””â”€â”€â–º Retry once, then show error
    â”‚
    â”œâ”€â”€â–º DOM Error â”€â”€â”€â”€â”€â”€â”€â”€â–º Try fallback selectors
    â”‚                               â”‚
    â”‚                               â”œâ”€â”€â–º Success â”€â”€â–º Continue
    â”‚                               â”‚
    â”‚                               â””â”€â”€â–º Fail â”€â”€â–º Disable for this platform
    â”‚
    â””â”€â”€â–º Unknown Error â”€â”€â”€â”€â–º Log stack trace
                                    â”‚
                                    â””â”€â”€â–º Generic error message to user
```

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Development                              â”‚
â”‚                                                             â”‚
â”‚  Local Machine                                              â”‚
â”‚  â”œâ”€â”€ extension/ (Vite dev server)                           â”‚
â”‚  â”œâ”€â”€ backend/ (Functions Framework)                         â”‚
â”‚  â””â”€â”€ Test with chrome://extensions                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ git push
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CI/CD (GitHub Actions)                   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Build Extension â”‚          â”‚ Deploy Backend  â”‚          â”‚
â”‚  â”‚ â€¢ npm run build â”‚          â”‚ â€¢ gcloud deploy â”‚          â”‚
â”‚  â”‚ â€¢ Run tests     â”‚          â”‚ â€¢ Run tests     â”‚          â”‚
â”‚  â”‚ â€¢ Create .zip   â”‚          â”‚                 â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                              â”‚
            â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chrome Web Store     â”‚      â”‚  Google Cloud Platform       â”‚
â”‚                      â”‚      â”‚                              â”‚
â”‚ â€¢ Automated upload   â”‚      â”‚  â€¢ Cloud Functions (Live)    â”‚
â”‚ â€¢ Review process     â”‚      â”‚  â€¢ Vertex AI                 â”‚
â”‚ â€¢ Public distributionâ”‚      â”‚  â€¢ Firestore                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â€¢ Secret Manager            â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ Used by
                                          â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   End Users (Support Agents) â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Extension Security
â”œâ”€â”€ Content Security Policy (CSP)
â”‚   â””â”€â”€ No inline scripts, no eval()
â”œâ”€â”€ Host Permissions
â”‚   â””â”€â”€ Only specific support platforms
â””â”€â”€ Sandboxed contexts
    â””â”€â”€ Service worker isolated from web pages

Layer 2: Data Protection
â”œâ”€â”€ API Keys
â”‚   â”œâ”€â”€ Encrypted in chrome.storage
â”‚   â””â”€â”€ Never logged or exposed
â”œâ”€â”€ Conversation Data
â”‚   â”œâ”€â”€ Never stored permanently
â”‚   â”œâ”€â”€ Cleared after suggestion
â”‚   â””â”€â”€ Encrypted in transit (HTTPS)
â””â”€â”€ User Privacy
    â””â”€â”€ No tracking or analytics without consent

Layer 3: API Security
â”œâ”€â”€ Authentication
â”‚   â”œâ”€â”€ API key validation
â”‚   â””â”€â”€ Service account tokens
â”œâ”€â”€ Rate Limiting
â”‚   â”œâ”€â”€ Per-user limits
â”‚   â””â”€â”€ Global limits
â””â”€â”€ Input Validation
    â”œâ”€â”€ Schema validation (Zod)
    â””â”€â”€ Sanitize inputs

Layer 4: GCP Security
â”œâ”€â”€ IAM Policies
â”‚   â””â”€â”€ Least privilege access
â”œâ”€â”€ Secret Manager
â”‚   â””â”€â”€ Encrypted secrets
â”œâ”€â”€ VPC (Optional)
â”‚   â””â”€â”€ Private API endpoints
â””â”€â”€ Audit Logging
    â””â”€â”€ Track all access
```

## YOLO Mode: Goal-Oriented Conversation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YOLO Mode State Machine                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    [Agent Enables YOLO Mode]
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Configure Goal â”‚
                    â”‚  & Safety Rules  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   INITIALIZING   â”‚
                    â”‚  - Set max turns â”‚
                    â”‚  - Load rules    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   WAITING FOR    â”‚
                    â”‚  CUSTOMER MSG    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                  [Customer sends message]
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ANALYZING      â”‚
                    â”‚  - Extract contextâ”‚
                    â”‚  - Check safety   â”‚
                    â”‚  - Eval goal stateâ”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ESCALATION CHECK â”‚    â”‚  GOAL PROGRESS  â”‚
        â”‚  Detected?       â”‚    â”‚  Assessment     â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚      â”‚                 â”‚
           YES     NO                 â–¼
             â”‚      â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚      â”‚        â”‚ GENERATE        â”‚
             â”‚      â””â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ RESPONSE        â”‚
             â”‚               â”‚ (Call Gemini)   â”‚
             â”‚               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                    â”‚
             â”‚                    â–¼
             â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚               â”‚ SAFETY CHECK    â”‚
             â”‚               â”‚ - Validate resp â”‚
             â”‚               â”‚ - Confidence OK?â”‚
             â”‚               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
             â”‚                    â”‚      â”‚
             â”‚                   OK    FAIL
             â”‚                    â”‚      â”‚
             â”‚                    â–¼      â”‚
             â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚               â”‚ INJECT & SEND   â”‚
             â”‚               â”‚ - Add to input  â”‚
             â”‚               â”‚ - Click send    â”‚
             â”‚               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                    â”‚
             â”‚                    â–¼
             â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚               â”‚ UPDATE STATE    â”‚
             â”‚               â”‚ - Increment turnâ”‚
             â”‚               â”‚ - Update goal   â”‚
             â”‚               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                    â”‚
             â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚          â”‚                   â”‚
             â”‚     [Max turns?]        [Goal Done?]
             â”‚          â”‚                   â”‚
             â”‚         YES                 YES
             â”‚          â”‚                   â”‚
             â–¼          â–¼                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         ESCALATE TO HUMAN          â”‚
        â”‚  - Stop auto-responses             â”‚
        â”‚  - Notify agent                    â”‚
        â”‚  - Save conversation log           â”‚
        â”‚  - Display handoff message         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         CONVERSATION END           â”‚
        â”‚  - Save metrics                    â”‚
        â”‚  - Reset state                     â”‚
        â”‚  - Return to manual mode           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## YOLO Mode: Safety & Control Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YOLO Mode Control Panel                      â”‚
â”‚                    (Extension Popup)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MODE: YOLO (Autonomous)                    [STOP] ğŸ›‘     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  CURRENT GOAL                                             â”‚ â”‚
â”‚  â”‚  Resolve customer's shipping delay issue                 â”‚ â”‚
â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 60% Complete                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  CONVERSATION STATUS                                      â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Turns Used:      3 / 10                                 â”‚ â”‚
â”‚  â”‚  Confidence:      High (0.89)                            â”‚ â”‚
â”‚  â”‚  Info Gathered:   âœ“ Order number                         â”‚ â”‚
â”‚  â”‚                   âœ“ Tracking ID                          â”‚ â”‚
â”‚  â”‚                   â³ Expected delivery                    â”‚ â”‚
â”‚  â”‚  Next Step:       Check warehouse status                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LIVE CONVERSATION                         [Take Over]    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ‘¤ Customer: My package hasn't arrived              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ¤– AI: I understand your concern. Could you provide â”‚ â”‚ â”‚
â”‚  â”‚  â”‚        your order number?                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ‘¤ Customer: #ORD-12345                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ¤– AI: Thank you! Let me check on order #ORD-12345. â”‚ â”‚ â”‚
â”‚  â”‚  â”‚        I see it's currently in transit...            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ [Sending...]                                         â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  SAFETY MONITORS                                          â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Escalation Keywords:   None detected                    â”‚ â”‚
â”‚  â”‚  Sentiment:             Neutral                          â”‚ â”‚
â”‚  â”‚  Confusion Detected:    No                               â”‚ â”‚
â”‚  â”‚  Policy Violations:     None                             â”‚ â”‚
â”‚  â”‚  Rate Limit:            OK (last msg 12s ago)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ACTIONS                                                  â”‚ â”‚
â”‚  â”‚  [â¸ Pause YOLO]  [âœ‹ Manual Takeover]  [ğŸ“‹ View Log]     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## YOLO Mode: Escalation Decision Tree

```
                      [New Customer Message]
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ ESCALATION CHECK â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SENTIMENT    â”‚    â”‚ KEYWORDS     â”‚    â”‚ GOAL STATE   â”‚
â”‚ ANALYSIS     â”‚    â”‚ DETECTION    â”‚    â”‚ ANALYSIS     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                    â”‚
  Is sentiment         Contains:          Goal progress
  highly negative?     - "manager"        stalled?
       â”‚               - "complaint"           â”‚
       â”‚               - "angry"               â”‚
       â”‚               - "supervisor"          â”‚
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                   â”‚
                YES                 NO
                 â”‚                   â”‚
                 â–¼                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ CHECK        â”‚    â”‚ CONFIDENCE   â”‚
        â”‚ ADDITIONAL   â”‚    â”‚ CHECK        â”‚
        â”‚ FACTORS      â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
               â”‚              Is AI conf.
          - Max turns         below 0.7?
          - Repeated Qs            â”‚
          - Confusion         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
               â”‚             YES       NO
               â”‚              â”‚         â”‚
               â–¼              â–¼         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ESCALATE!    â”‚  â”‚ CONTINUE     â”‚
        â”‚              â”‚  â”‚ AUTONOMOUS   â”‚
        â”‚ 1. Stop auto â”‚  â”‚ MODE         â”‚
        â”‚ 2. Notify    â”‚  â”‚              â”‚
        â”‚ 3. Handoff   â”‚  â”‚ Generate AI  â”‚
        â”‚ 4. Log       â”‚  â”‚ response     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## YOLO Mode: Multi-Goal Configuration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Goal Templates Library                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GOAL TYPE 1: Information Gathering                      â”‚
â”‚                                                          â”‚
â”‚ Objective: Collect specific information from customer   â”‚
â”‚ Required Info:                                           â”‚
â”‚   â€¢ Order number                                         â”‚
â”‚   â€¢ Email address                                        â”‚
â”‚   â€¢ Issue description                                    â”‚
â”‚ Max Turns: 5                                             â”‚
â”‚ Success Criteria: All required info collected            â”‚
â”‚ Escalation: If customer refuses to provide info          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GOAL TYPE 2: Issue Resolution                           â”‚
â”‚                                                          â”‚
â”‚ Objective: Resolve customer's shipping delay            â”‚
â”‚ Steps:                                                   â”‚
â”‚   1. Gather order number âœ“                               â”‚
â”‚   2. Check tracking status â³                             â”‚
â”‚   3. Provide estimated delivery â¬œ                         â”‚
â”‚   4. Offer compensation (if delayed >3 days) â¬œ            â”‚
â”‚ Max Turns: 10                                            â”‚
â”‚ Success Criteria: Customer satisfied with resolution     â”‚
â”‚ Escalation: If refund >$100 required                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GOAL TYPE 3: Escalation to Specialist                   â”‚
â”‚                                                          â”‚
â”‚ Objective: Gather info and route to right specialist    â”‚
â”‚ Information to Collect:                                  â”‚
â”‚   â€¢ Issue category (Technical/Billing/General)           â”‚
â”‚   â€¢ Urgency level                                        â”‚
â”‚   â€¢ Account details                                      â”‚
â”‚   â€¢ Previous contact history                             â”‚
â”‚ Max Turns: 3                                             â”‚
â”‚ Success Criteria: Handoff with complete context          â”‚
â”‚ Escalation: Immediate if critical issue                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GOAL TYPE 4: Upsell / Cross-sell                        â”‚
â”‚                                                          â”‚
â”‚ Objective: Suggest relevant products/upgrades           â”‚
â”‚ Prerequisites:                                           â”‚
â”‚   â€¢ Customer satisfied with support                      â”‚
â”‚   â€¢ No active complaints                                 â”‚
â”‚   â€¢ Positive sentiment                                   â”‚
â”‚ Approach: Soft suggestion, no pressure                   â”‚
â”‚ Max Turns: 2                                             â”‚
â”‚ Success Criteria: Offer presented without pushback       â”‚
â”‚ Escalation: If customer shows annoyance                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

These comprehensive diagrams illustrate the dual-mode operation, goal-oriented autonomous behavior, safety mechanisms, and control interfaces for the Support Chat AI Assistant.
